Gyorsabb lett a Sun Niagara, de nem eléggé

Jónak tûnik - de csak messzirõl
Az új chipek 1,6 gigahertzes névleges órajelen üzemelnek, ami 14 százalékkal haladja meg az eddigi 1,4 gigahertzes változatokat. Az órajel a masszívan párhuzamos Niagarák által megcélzott, többnyire tranzakcionális alkalmazások többségére marginális hatással bír, ugyanakkor a magonként nyolc utasításszál folyamatosan váltogatott futtatásával az architektúra valószínûleg többet profitál a frekvencia emelkedésébõl, mivel végrehajtóegységei magasabb kihasználtsággal üzemelnek.
A Sun és a Fujitsu két eredményt tett közzé az új chipek teljesítményének érzékeltetésére. A vállalatok egyik választása az SAP Sales and Distribution benchmarkra esett, kétrétegû konfigurációban. Egy négy UltraSPARC T2 (Victoria Falls) chippel és 256 gigabájt memóriával szerelt, Solaris 10 operációs rendszert és Oracle 10g adatbázist futtató T5440 szerver 4720 SAP 6.0 SD-felhasználót szolgált ki 0,97 másodperces átlagos válaszidõvel. Ez negyedével több a négy 5 gigahertzes Power6 chippel és 64 gigabájt memóriával szerelt IBM Power 550 Express rendszer által kiszolgált 3752 felhasználónál, mellyel a Sun az összevetést végezte - a konfiguráció AIX 6.1 operációs rendszert és DB 9.5 adatbázist futtatott.
Elsõre talán úgy tûnik, ez szép eredmény, hiszen a Power6 egy csúcskategóriás processzor, így biztosan drága is, míg az UltraSPARC T2-alapú gépek "alulról érkeznek", így jóval olcsóbbnak kellene lenniük. Ez azonban közel sincs így: a Power 550 Express négy 5 gigahertzes Power6 processzorral (8 mag, 16 szál) és 16 gigabájt memóriával ugyanúgy 115 ezer dolláros kezdõ listaárral rendelkezik, mint a négy 1,6 gigahertzes UltraSPARC T2 Plusszal és 128 gigabájt memóriával szerelt T5440. Utóbbihoz ráadásul további 128 gigabájt memóriát kell vásárolnunk, hogy a Sun és a Fujitsu által kimért teljesítményt kapjuk, míg az 550-hez 48 gigabájtot. Igaz, a T5440 már 128 gigabájt memóriával is ütõképes, míg az IBM Power 550 mindenképpen igényel memóriabõvítést, valamint ebben az árban nincs benne még az AIX licence sem. Így az IBM-szerver beszerzési ára valószínûleg magasabbról indul, miközben némileg alacsonyabb teljesítményt nyújt.
A licencprobléma
Csakhogy számos szoftver, köztük a T5440 által is használt Oracle 10g licence processzormagonkénti licenceléssel dolgozik, és az UltraSPARC T2 egy magja 0,75 licencnek számít, míg egy Power6 magot 1 licenccel kalkulál az Oracle. Ezt azt jelenti, hogy Oracle 10g adatbázis licencbõl 24-et kell vásárolni a 32 processzormaghoz, míg a Power6 esetében 8 licenccel, vagyis harmadával kellene számolni. Egy Enterprise Edition licenc listaára 47 500 dollár, azaz nagyjából 760 ezer dollárral magasabbról indul a Sun T5440 esetén, amit még az esetleges extra funkciók és évi támogatási költségek is tovább duzzasztanak. Mindezt tovább súlyosbíthatja a többi processzormagonként licencelõ szoftver is - az SAP tipikusan felhasználónkénti licencelést alkalmaz, így itt nem jelentkezik ez a hátrány.
A T5440 konfiguráció bár negyedével magasabb teljesítményt nyújt, az IBM Power 550 Express a memória maximális bõvítésével és a válaszidõk 20-30 százalékos lazításával sokkal kevesebb pénzbõl hasonlóan muzsikálhat. Ugyanígy megfontolandó például a hatmagos Opteron is, mely egy négyutas HP ProLiant DL585 G6 dobozban azonos teljesítményt (4665 felhasználó, 0,96 másodperces válaszidõk) kínál, és mindössze 12 Oracle-licencre van szüksége - a gép listaára pedig nagyjából negyede az SPARC T5440 vagy a Power 550 gépekének, ráadásul Windowszal vagy Linuxszal használva üzemeltetése is olcsóbb lehet a UNIX-okénál. A valamivel kevesebb felhasználóval rendelkezõ, alacsonyabb terhelésû igények kielégítésében pedig a kétfoglalatos Nehalem-gépek verhetetlenek, maga a Sun Microsystems is Solaris 10 és Oracle 10g kombinációval 3700 felhasználót szolgált ki hasonló válaszidõkkel egy Sun Fire X4270 gépen, mindössze 4 Oracle licencért, ár-teljesítményben megszégyenítve az elõbb tárgyalt négyfoglalatos gépek bármelyikét.

A SPECjAppServer2004 egy szintén tranzakcionális kereskedelmi rendszer, melyben Java-alapú alkalmazásszerverek csatlakoznak egy adatbázisszerverre - többnyire Oracle Weblogic és Database. Az új chipekkel a T5440-bõl 21 százalékkal magasabb teljesítményt sajtolt ki, amit kétségtelenül nem magyarázhat a hardver, sokkal inkább a beállítások megfelelõ hangolása. A Sun két darab T5440 szerver bevetésével (egy alkalmazás, egy adatbázis) 7311,5 JOPS-ot, vagyis másodpercenkénti feladatvégzési sebességet ért el.
Ebben a benchmarkban sajnos viszonylag kevés komparabilis eredmény található, így például a fenti Power 550 konfigurációval nem készült publikus mérés. Egy Dell PowerEdge klaszter (2 darab R610, egy   R900) hasonló teljesítményt (7311 JOPS) adott le két Nehalem-alkalmazásszerver, és egy négy darab hatmagos Dunningtont (Xeon 7400 sorozat) alkalmazó adatbázisszerverrel. Hasonlóan az SAP SD-teszthez, x86-os alapokon jóval alacsonyabb hardver-, szoftver- és üzemeltetési költséggel kalkulálhatunk, 48 Oracle licenc helyett 20 licenccel megúszhatjuk.
Életlen
Bár a Sun kihangsúlyozza energiahatékonyságbeli és sûrûségbeli elõnyeit, ilyen költséges felhasználású szervereknél ezek a tételek lényegében nem befolyásolják az egyenletet a teljes életciklus alatt sem. A valóság az, hogy az elmúlt fél év alatt drasztikusan megváltozott a Sun UltraSPARC T2/T2 Plus processzorokkal szerelt CMT-szervereinek versenyképessége.
A Nehalem-EP kódnéven ismert Xeon 5500-as sorozat és a hatmagos Opteronok lényegében minden területen (webkiszolgálás, köztesréteg, adatbázisok, üzleti alkalmazások) felveszik a versenyt a legnagyobb CMT-gépekkel is, mint amilyen a T5440 is, méghozzá jóval alacsonyabb áron. Ha néhány atipikus esetben mégsem, akkor tipikusan a licenc- és szoftvertámogatási költségekkel a nagyobb Power6-konfigurációk fogják be - ráadásul a UNIX robusztussága sem lehet igazán érv, ugyanis a Solaris 10 Intel és AMD processzorokon is támogatott, a Poweren pedig értelemszerûen ott az AIX.
Úgy tûnik tehát, a CMT egyelõre megmarad a korábbi, kis méretû és elavult UltraSPARC-gépek kiváltására, és új alkalmazások infrastruktúrájaként kevéssé indokolható választás. Kérdés, mennyire segít ezen majd a valamikor a közeljövõben megjelenõ Niagara 3, mely 16 maggal, magonként 16 szállal (chipenként 256 utasításszál) valamikor a következõ egy év során jelenik meg - az Intel és az AMD feszített termékterveinek fényében elképzelhetõ, hogy a párhuzamosságot az szélsõségességig fokozó Niagara 3 kevéssé tud releváns maradni a piac számára, melynek továbbra is fontos a magonkénti teljesítmény.
LDoms 1.2
E mellett a Sun kiadta az LDoms 1.2 virtualizációs szoftvert is Solaris 10-hez. Az új verzió a logikai domainek egyszerûbb konfigurációját ígéri beépített parancssoros eszközökkel, a domainok mozgathatóvá váltak, új processzor energiakezelési támogatást hoz magával a nem használt magok kikapcsolásával. A hálózati teljesítmény fokozása érdekében megjelent a jumbo frame-ek támogatása, de újdonság még a beépített domain-visszaállítás és a fizikai-virtuális migráció.	     
                  
                  
                  
                   