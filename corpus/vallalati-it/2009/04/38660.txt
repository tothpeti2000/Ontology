Nagy ugrás az AMD Istanbul, de nem lesz elég a Nehalem megállításához

Rendkívül agresszíven tervezi szerverporcesszorainak magszámát növelni az AMD, hogy ellensúlyozni tudja az Intel mikroarchitekturális fölényét -- így lehetne összefoglalni az AMD szerverpiaci terveit tárgyaló tegnapi prezentációját. Ahogyan azt Dirk Meyer, a vállalat elnök-vezérigazgatója már a negyedéves pénzügyi eredményeket tárgyaló konferenciahíváson is elmondta, a hatmagos Istanbul az eredetileg vártnál jóval korábban, júniusban kerül piacra.



Sebbel-lobbal

Az Istanbul kódnéven ismert hatmagos Opteron chipek már tömegtermelésbe mentek a drezdai üzemekben, az AMD májusban kezdi meg azok szállításait a szervergyártók fel, és a cég várakozásai szerint júniusban már rendelhetõk lesznek a világ vezetõ szervermárkáitól. A chip a vártnál hónapokkal elõbb készült el, és gyakorlatilag fél évvel követi a négymagos Shanghai piacra kerülését. Az AMD valószínûleg kettõs megközelítést alkalmaz majd, és a kis teljesítményigényû és árérzékeny, valamint a lehetõ alacsonyabb fogyasztást vagy legmagasabb órajelet megkövetelõ felhasználóknak a négymagos, míg a nagyobb terhelésû, párhuzamosított szerverfeladatokat futtatóknak a hatmagos Opteronokat árazza majd be.

Féléves ciklusú termékbevezetés a szerverpiacon különösen szokatlan, ráadásul az AMD csak a napokban teljesítette ki Shanghai portfólióját, az AMD-nek azonban nincs más választása. Az Intel Nehalem mikroarchitektúrájú, négymagos Xeonjai ugyanis olyan brutális teljesítménybeli fölénnyel rendelkeznek a piacon, hogy új szerver vásárlása esetén az AMD Opteron az esetek többségében gyakorlatilag szóba sem jöhet szakmai alapokon. Nem véletlen, hogy az AMD a gazdasági válságra hivatkozva a meglévõ szerverek frissítését szorgalmazza. A 2006 nyara óta megjelent Socket F foglalatú, osztott feszültségbetáplálással rendelkezõ alaplapokba egy BIOS-frissítést követõen beilleszthetõek a legújabb négymagos Opteronok, amihez az AMD árkedvezményt is ad, így kapacitásbõvítés vagy konszolidációs projektek esetén sem szükségerû az új szerverek vásárlása, és a régiek lecserélése.

A már küszöbön álló Istanbul jelentõs, egyes esetekben meglepõen nagy elõrelépést hoz majd magával a Shanghaihoz képest. Az AMD azonos fogyasztás mellett átlagosan 30 százalékos teljesítménynövekedésrõl beszél, ez azonban különösen nagy szórást mutat. Nem hitelesített mérések alapján a lebegõpontos számításokban intenzív kódokat tömörítõ SPECfp_rate_base2006 esetében átlagosan 25-30 százalékos teljesítménynövekedés figyelhetõ meg, ezzel szemben a többségében integer mûveletekbõl álló kódokat összegyûjtõ SPECint_rate_base2006 alatt 50 százalék feletti a javulás -- azonos órajelen pedig 70-80 százalékos! Mivel az Istanbul ugyanazon a 45 nanométeres eljáráson készül, mint a Shanghai, ezért a magok számának növekedése az energiakorlát miatt az órajelek csökkenésével jár, ami 2,4-2,6 gigahertzet jelenthet a csúcsváltozat esetében. 

Relatív teljesítmény az elsõ Opteronra normalizálva

Egy ilyen, a processzorerõforrások bõvülését meghaladó ugrás magyarázatot követel, erre azonban még várni kell. Nem triviális, hogy ez a növekedés milyen mértékben konvertálódik valódi szerverfeladatok futtatásakor nyújtott teljesítményre, de a mérések részletes bontása nélkül az sem látszik, a SPECint kódok alatt viszonylag konzisztens javulásról lehet-e beszélni, vagy néhány extrém kiugrás húzza fel az átlagot, így kénytelenek vagyunk az AMD által megadott 30 százalékos javulást alapul venni. Az Istanbul mikroarchitekturálisan gyakorlatilag teljesen megegyezik elõdjével, a Shanghaijal, ugyanakkor egy új cache-koherencia protokollt valósít meg HyperTransport Assist néven, mely az L3-ban tárolt indextábla segítségével kiszûri a felesleges koherenciakommunikációt, így takarékoskodva a processzorok közötti HyperTransport linkek kapacitásával, valamint csökkentve a processzormagok által a válaszra való várakozásra pazarolt ciklusokat.

Szép-szép, de nem elég

Úgy tûnik azonban, a szerveralkalmazások többsége alatt az Istanbul sem lesz elegendõ a Xeon 5500-as sorozat legyûrésében -- a másfélszer több mag ellenére sem. A Nehalem ugyanis egyaránt behozhatatlan, 40-120 százalék közötti elõnnyel rendelkezik a számításintenzív és a tranzakcionális kódokat reprezentálni igyekvõ iparági szerverbenchmarkokban. Mindez rengeteg faktorból tevõdik össze, a legjelentõsebbek közt a szélesebb és erõteljesebb felépítésû OoO (soronkívüli végrehajtású) mikroarchitektúra, a nagyobb memóriasávszélesség és több gyorsítótár, valamint a legnagyobb faktor a visszatérõ Hyper-Threading (HT), vagyis a két utasításszál szimultán  feldolgozásának képessége. 

[+] Brutális teljesítményû az Intel új szerverchipje  

A HT-ból leginkább tranzakcionális alkalmazások alatt profitál a Nehalem, a nyereség tipikusan 10-30 százalék közötti, és emiatt az Istanbul tökéletesen esélytelen megelõzni az ilyen típusú feladatokban, mint például a webkiszolgálás, az adatbázisalapú kliens-szerver üzleti alkalmazások. Kivétel lehet ez alól a Java, melyben az Opteronok hagyományosan jól teljesítenek, és a HyperThreading sem hatásos rajta, vagyis az Istanbulok itt versenyképesek lehetnek a Nehalemekkel szemben.

Egy másik terület, ahol az Istanbul teret nyerhet akár a Nehalemmel szemben, az a HPC, vagyis a nagy számítási igényû kódok, ahol lehetõség nyílik a kód optimalizálására, így az Istanbul számítási erõforrástöbbletének kihasználására -- ez azonban nagymértékben függ a kód viselkedésétõl. Az Istanbul tehát leginkább a Socket F-szerverek frissítésére vonzó termék, míg az új szervertelepítéseket továbbra is a Nehalem uralja el egyre inkább, értelmetlenné téve a jelenlegi négyutas Xeon és Opteron konfigurációk nagy részét is, és csak legnagyobb terhelésû, osztott memóriás rendszert megkövetelõ kritikus feladatok esetén marad meg a négy- és nyolcfoglalatos Istanbul-gépek létjogosultsága -- a szerverek több mint háromnegyedét azonban kétutas konfigurációk teszik ki.