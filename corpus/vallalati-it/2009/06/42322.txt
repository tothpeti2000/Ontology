Törölte Rock processzorát a Sun

A Rock kódnéven ismert projekt eredetileg egy processzortechnológiai kutatásnak indult, majd a klasszikus UltraSPARC vonal továbbfejlesztési problémái, történetesen a Millennium projekt törlését követõen valódi termékfejlesztéssé avanzsált -- mindez mintegy 5 évvel ezelõtt történt. A rendkívül ambiciózus újításokat felvonultató architektúra feladata az lett volna, hogy megfordítsa a Sun balsorsát, és újra versenyképessé tegye a UNIX-szerverek világában, felvéve a versenyt az IBM Power és a HP Integrity rendszerekkel, egyúttal minimalizálva az x86-os gépek okozta lemorzsolódást. 
Túl sokat akart a szarka
Az olyan, korábban csak akadémiai és ipari kutatásokban látott processzortechnológiák, mint a magok 4x4-es elrendezésû klaszterizációja és az egyes klaszterekben megosztott L1 tárak, a spekulatív többszálúsítás, a tranzakcionális memóriakezelés vagy az árnyékfonalakkal megvalósított soronkívüli végrehajtás együttes hatása papíron egy rendkívül ütõképes chipet ígértek. A cél az volt, hogy egy masszívan párhuzamos, ám egyszálú végrehajtásban is erõs architektúrát hozzon létre a Sun -- a rengeteg újítás azonban egyúttal hatalmas kockázatot is jelentett.





A Texas Instruments 65 nanométeres csíkszélességû félvezetõgyártási eljárását megcélzó, 16 magos Rock architektúrája a számtógépes szimulációkban rendkívül ígéretesnek mutatkozott, azonban egy ilyen komplexitású chip esetében a legerõsebb, még megfizethetõ szuperszámítógépekkel sem lehetséges néhány kilo- vagy megahertznél magasabb valódi órajel elérése -- emiatt valódi kódok lefuttatásával nem lehet az architektúra viselkedését teljességgel feltérképezni. 


[+] A Rock architekturális finomságai


A szimulátorokból visszakapott eredmények bizakodásra adtak okot a cégen belül. A chipek terveit 2007 elején véglegesítették a mérnökök, vagyis ekkor hagyta el az úgynevezett tape-out fázist a Rock, és került próbagyártásba, az elsõ példányokat még Jonathan Schwartz elnök-vezérigazgató is büszkén ünnepelte blogján. Rövidesen beindultak a laborokban az elsõ Supernova rendszerek az elsõ Rock chipekkel, és megindult a validáció. Az eredeti tervek szerint a Supernova kódnevû szerverek 2008 második felében jelentek volna meg, a következõ hónapok során azonban egyre nyilvánvalóbbá vált a Sunnál, hogy ez nem reális ütemterv, a rendszereket finomhangolni kell, így szépen lassan megkezdték a csúszás kommunikációját, 2009-et emlegetve.
A Rockon dolgozó mérnökök mindeközben lényegében azzal töltötték 2008-at, hogy megpróbálták versenyképessé tenni a chipet és a Supernova rendszereket -- nem is a konkurenciával, hanem a Sun saját termékkínálatával. Az erõfeszítések végül hiábavalónak bizonyultak, a szimulátorokon jól mutató technikák, mint a hardveres árnyékfonalak (scout threading), a valódi kódokon a reméltnél sokkal kisebb gyorsulást eredményeztek, vagyis fundamentális problémák voltak az architektúrával. A Sun teljesen elhallgatott a Rockkal kapcsolatban, ahogyan próbálta minimalizálni a károkat, és csendben törölte a Rock utódainak fejlesztéseit, aminek a Sunon, a Solaris-bázison kívül az azokat gyártani hivatott TSMC sem örülhetett. 
Az arcvesztés tompítása érdekében a Sun az elmúlt hónapokban még úgy tervezte, hogy idén õsszel kiadja a Rockot és a Supernova rendszereket, valahova a Fujtisuval közösen fejlesztett&nbsp; M-sorozatú Sun Enterprise és a Sun Fire (UltraSPARC T1, T2) szerverek közé pozicionálva õket. Végül azonban úgy döntött a cég, hogy ennek semmi értelme, a Rock és a Supernova egyszerûen nem versenyképes. Nem csoda, hogy Mark Tremblay vezetõ tervezõ még azelõtt elhagyta a céget, és a Microsofthoz került, hogy a Rock termékké válhatott -- normál esetben a vezetõ tervezõ a chip tömeges piacra dobásáig a projekttel marad.
Nem adják fel
A Sun a dollárszázmilliós projekt megszüntetésével felszabadult erõforrásait átcsoportosítja, hogy felgyorsítsa a Niagara vonal fejlesztési ütemtervét, mintegy 6-9 hónappal elõrehozva a jövõbeni chipek megjelenéseit. A cég a jövõben visszatér a klasszikus recepthez, és a korábbi UltraSPARC II/III/IV konzervatívabb fejlesztési megközelítését porolja le, és ennek szellemében viszi tovább a Niagara ágát. Az elképzelések szerint egy közös processzortechnológiai fejlesztési mederbõl több derivatív termékvonal ágazik majd le. A cél az, hogy a célpiacon futtatott kódok igényeit szem elõtt tartva hozzák létre a végleges chipeket, így például lehet kevesebb de erõsebb maggal rendelkezõ (skálázódó nagygépek), vagy sok de gyenge magos processzorokat (jelenlegi Niagara) is alkotni egy viszonylag hatékony, moduláris megközelítéssel, mely áramköri építõelemek, megoldások egy közös készletén alapulna.
Mi szükség van minderre, ha a Fujitsu adja jelenleg is a nagyvállalati Solaris/SPARC-gépeket? A japánok a Sun legnagyobb sajnálatára nem hajlandóak hosszútávú elkötelezettségrõl tanúbizonyságot tenni az amerikaiak irányában, így a terméktervek horizontja mindössze három év körüli, erre pedig nem alapozhat a Sun, melynek továbbra is a legnagyobb klasszikus UNIX-bázisa van a világon. Jelenleg az SPARC64 VII két derivatívájának megjelenése biztos csak, a többirõl folynak a tárgyalások.
Larry Ellison közbeszólhat
Hatalmas kérdõjel azonban, hogy az Oracle mihez kezd majd a Sun lassan egy évtizede versenyképtelen és eredménytelen processzorfejlesztéseivel -- a Niagara vonal az Afara Websystems felvásárlásának eredményeként született meg. A Sun-Oracle tranzakció nem zárult le, így továbbra is tökéletesen bizonytalan, mihez kezd a processzorokkal Larry Ellison, a Rockkal és a jövõvel kapcsolatos döntésekbe egyelõre nem szólhatott bele a szoftveróriás. A hivatalos álláspont a Sunon belül az, hogy az Oracle meghagyja a Sunnál lévõ, egyelõre kevéssé publikus, valamint szupertitkos&nbsp;processzor-/szerverfejlesztési ágakat, mivel mindegyiknek lehet helye a piacon. 

[+] Számít, sõt épít a Sun hardverrészlegére az Oracle 

Sok múlik azon, hogy Ellison akar-e az Oracle-bõl "egy következõ IBM-et" csinálni, ahogyan fogalmazott a HWSW-nek egyik forrása, vagy egy reggel ránéz a nyereségességre, és egy mozdulattal kidobja a processzorfejlesztéseket az ablakon. Minden eddigi kudarc ellenére azonban addig sem riad vissza a Sun, hogy agresszív processzorfejlesztési próbálkozásai legyenek -- de hogy a jelenlegi folyó projektek eredményeznek-e valaha termékeket, még a jövõ zenéje.